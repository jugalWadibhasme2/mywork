import org.springframework.stereotype.Service;

import com.app.dto.AppointmentDto;
import com.app.entities.Appointment;
import com.app.repository.IAppointmentRepo;

@Service
public class AppointmentService {

    // Example method
    public AppointmentDto getAppointmentById(Long id) throws RuntimeException {
        Appointment appointment = IAppointmentRepo.findById(id).orElseThrow(() -> new RuntimeException("Appointment not found"));
        
        AppointmentDto.PatientDto patientDto = new AppointmentDto.PatientDto(
            appointment.getPatient().getPatientId(),
            appointment.getPatient().getFirstName(),
            appointment.getPatient().getLastName(),
            appointment.getPatient().getEmail(),
            appointment.getPatient().getContactNumber()
        );
        
        AppointmentDto.DoctorDto doctorDto = new AppointmentDto.DoctorDto(
            appointment.getDoctor().getDoctorId(),
            appointment.getDoctor().getDoctorName(),
            appointment.getDoctor().getQualification(),
            appointment.getDoctor().getAvailability()
        );
        
        return new AppointmentDto(
            appointment.getAppointmentId(),
            patientDto,
            doctorDto
        );
    }
}
